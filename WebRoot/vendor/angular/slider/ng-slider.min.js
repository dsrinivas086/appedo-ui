!function(t){"use strict";t.module("ngSlider",[]).directive("slider",["$compile","$templateCache","$timeout","$window","slider",function(i,s,e,o,n){return{restrict:"AE",require:"?ngModel",scope:{options:"=",ngDisabled:"="},priority:1,link:function(r,h,l,a){function d(){t.element(o).bind("resize",function(){r.slider.onresize()})}if(a){if(!r.options)throw new Error('You must provide a value for "options" attribute.');t.isString(r.options)&&(r.options=t.toJson(r.options)),r.mainSliderClass="jslider",r.mainSliderClass+=" jslider_round",r.mainSliderClass+=r.options.vertical?" vertical ":"",r.mainSliderClass+=r.options.css?" sliderCSS":"",h.after(i(s.get("ng-slider/slider-bar.tmpl.html"))(r,function(t,i){i.tmplElt=t}));var p=!1,c=function(){r.from=""+r.options.from,r.to=""+r.options.to,r.options.calculate&&"function"==typeof r.options.calculate&&(r.from=r.options.calculate(r.from),r.to=r.options.calculate(r.to));var i={from:r.options.from,to:r.options.to,step:r.options.step,smooth:r.options.smooth,limits:!0,round:r.options.round||!1,value:a.$viewValue,dimension:"",scale:r.options.scale,vertical:r.options.vertical,css:r.options.css,realtime:r.options.realtime,cb:u,threshold:r.options.threshold};i.calculate=r.options.calculate||void 0,i.onstatechange=r.options.onstatechange||void 0,r.slider=r.slider?r.slider.init(h,r.tmplElt,i):f(h,r.tmplElt,i),p||d();var s=r.tmplElt.find("div")[7];t.element(s).html(r.slider.generateScale()),r.slider.drawScale(s),r.ngDisabled&&g(r.ngDisabled),p=!0};a.$render=function(){(a.$viewValue||0===a.$viewValue)&&("number"==typeof a.$viewValue&&(a.$viewValue=""+a.$viewValue),a.$viewValue.split(";")[1]||(r.mainSliderClass+=" jslider-single"),r.slider&&(r.slider.getPointers()[0].set(a.$viewValue.split(";")[0],!0),a.$viewValue.split(";")[1]&&r.slider.getPointers()[1].set(a.$viewValue.split(";")[1],!0)))};var u=function(t,i){r.disabled||(r.$apply(function(){a.$setViewValue(t)}),r.options.callback&&r.options.callback(t,i))};r.$watch("options",function(){e(function(){c()})},!0);var g=function(t){r.disabled=t,r.slider&&(r.tmplElt.toggleClass("disabled"),r.slider.disable(t))};r.$watch("ngDisabled",function(t){g(t)});var f=function(t,i,s){return new n(t,i,s)}}}}}]).config(function(){}).run(function(){})}(angular),function(t){"use strict";t.module("ngSlider").constant("sliderConstants",{SLIDER:{settings:{from:1,to:40,step:1,smooth:!0,limits:!1,round:!1,value:"3",dimension:"",vertical:!1,calculate:!1,onstatechange:!1,callback:!1,realtime:!1},className:"jslider",selector:".jslider-",css:{visible:{visibility:"visible"},hidden:{visibility:"hidden"}}},EVENTS:{}})}(angular),function(t){"use strict";t.module("ngSlider").factory("sliderDraggable",["sliderUtils",function(i){function s(){this._init.apply(this,arguments)}return s.prototype.oninit=function(){},s.prototype.events=function(){},s.prototype.onmousedown=function(){this.ptr.css({position:"absolute"})},s.prototype.onmousemove=function(t,i,s){this.ptr.css({left:i,top:s})},s.prototype.onmouseup=function(){},s.prototype.isDefault={drag:!1,clicked:!1,toclick:!0,mouseup:!1},s.prototype._init=function(){if(arguments.length>0){if(this.ptr=arguments[0],this.parent=arguments[2],!this.ptr)return;this.is={},t.extend(this.is,this.isDefault);var s=i.offset(this.ptr);this.d={left:s.left,top:s.top,width:this.ptr[0].clientWidth,height:this.ptr[0].clientHeight},this.oninit.apply(this,arguments),this._events()}},s.prototype._getPageCoords=function(t){return t.targetTouches&&t.targetTouches[0]?{x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY}:{x:t.pageX,y:t.pageY}},s.prototype._bindEvent=function(t,i,s){this.supportTouches_?t[0].addEventListener(this.events_[i],s,!1):t.bind(this.events_[i],s)},s.prototype._events=function(){var i=this;this.supportTouches_="ontouchend"in document,this.events_={click:this.supportTouches_?"touchstart":"click",down:this.supportTouches_?"touchstart":"mousedown",move:this.supportTouches_?"touchmove":"mousemove",up:this.supportTouches_?"touchend":"mouseup",mousedown:(this.supportTouches_,"mousedown")};var s=t.element(window.document);this._bindEvent(s,"move",function(t){i.is.drag&&(t.stopPropagation(),t.preventDefault(),i.parent.disabled||i._mousemove(t))}),this._bindEvent(s,"down",function(t){i.is.drag&&(t.stopPropagation(),t.preventDefault())}),this._bindEvent(s,"up",function(t){i._mouseup(t)}),this._bindEvent(this.ptr,"down",function(t){return i._mousedown(t),!1}),this._bindEvent(this.ptr,"up",function(t){i._mouseup(t)}),this.events()},s.prototype._mousedown=function(i){this.is.drag=!0,this.is.clicked=!1,this.is.mouseup=!1;var s=this._getPageCoords(i);this.cx=s.x-this.ptr[0].offsetLeft,this.cy=s.y-this.ptr[0].offsetTop,t.extend(this.d,{left:s.x,top:s.y,width:this.ptr[0].clientWidth,height:this.ptr[0].clientHeight}),this.outer&&this.outer.get(0)&&this.outer.css({height:Math.max(this.outer.height(),$(document.body).height()),overflow:"hidden"}),this.onmousedown(i)},s.prototype._mousemove=function(t){this.is.toclick=!1;var i=this._getPageCoords(t);this.onmousemove(t,i.x-this.cx,i.y-this.cy)},s.prototype._mouseup=function(t){if(this.is.drag){this.is.drag=!1;var s=i.browser();this.outer&&this.outer.get(0)&&(this.outer.css("mozilla"===s?{overflow:"hidden"}:{overflow:"visible"}),this.outer.css({height:"auto"})),this.onmouseup(t)}},s}])}(angular),function(t){"use strict";t.module("ngSlider").factory("sliderPointer",["sliderDraggable","sliderUtils",function(i,s){function e(){i.apply(this,arguments)}return e.prototype=new i,e.prototype.oninit=function(i,s,e,o){this.uid=s,this.parent=o,this.value={},this.vertical=e,this.settings=t.copy(o.settings),this.normalOrder=this.parent.settings.from<this.parent.settings.to,this.threshold=this.parent.settings.threshold},e.prototype.onmousedown=function(){var t=s.offset(this.parent.domNode),i={left:t.left,top:t.top,width:this.parent.domNode[0].clientWidth,height:this.parent.domNode[0].clientHeight};this._parent={offset:i,width:i.width,height:i.height},this.ptr.addClass("jslider-pointer-hover")},e.prototype.onmousemove=function(i){var s=this._getPageCoords(i);this._set(this.calc(this.vertical?s.y:s.x)),this.settings.realtime&&this.settings.cb&&t.isFunction(this.settings.cb)&&this.allowed&&this.settings.cb.call(this.parent,this.parent.getValue(),!this.is.drag)},e.prototype.onmouseup=function(){this.settings.cb&&t.isFunction(this.settings.cb)&&this.allowed&&this.settings.cb.call(this.parent,this.parent.getValue(),!this.is.drag),this.is.drag||this.ptr.removeClass("jslider-pointer-hover")},e.prototype.limits=function(t){return this.parent.limits(t,this)},e.prototype.calc=function(t){return this.limits(this.vertical?100*(t-this._parent.offset.top)/this._parent.height:100*(t-this._parent.offset.left)/this._parent.width)},e.prototype.set=function(t,i){this.value.origin=this.parent.round(t),this._set(this.parent.valueToPrc(t,this),i)},e.prototype._set=function(t){if(this.allowed=!0,this.value.origin=this.parent.prcToValue(t),this.threshold&&this.parent.o.pointers[1]){var i=this.parent.o.pointers[0].value.origin,s=this.parent.o.pointers[1].value.origin;this.allowed=(this.normalOrder?s-i:i-s)>=this.threshold}if(!this.allowed){var e=this.parent.o.pointers[0===this.uid?1:0];return void(this.value.origin=0===this.uid?this.normalOrder?e.value.origin-this.threshold:e.value.origin+this.threshold:this.normalOrder?e.value.origin+this.threshold:e.value.origin-this.threshold)}this.value.prc=t,this.ptr.css(this.vertical?{top:t+"%",marginTop:-5}:{left:t+"%"}),this.parent.redraw(this)},e}])}(angular),function(t){"use strict";t.module("ngSlider").factory("slider",["sliderPointer","sliderConstants","sliderUtils",function(i,s,e){function o(){return this.init.apply(this,arguments)}return o.prototype.init=function(i,e,o){return this.settings=o,this.inputNode=i,this.inputNode.addClass("ng-hide"),this.settings.interval=this.settings.to-this.settings.from,this.settings.calculate&&t.isFunction(this.settings.calculate)&&(this.nice=this.settings.calculate),this.settings.onstatechange&&t.isFunction(this.settings.onstatechange)&&(this.onstatechange=this.settings.onstatechange),this.css=s.SLIDER.css,this.is={init:!1},this.o={},this.initValue={},this.create(e),this},o.prototype.create=function(s){var o=this;this.domNode=s;var n=this.domNode.find("div"),r=this.domNode.find("i"),h=t.element(n[1]),l=t.element(n[2]),a=t.element(n[5]),d=t.element(n[6]),p=t.element(r[0]),c=t.element(r[2]),u=t.element(r[3]),g=t.element(r[4]),f=t.element(r[5]),v=t.element(r[6]),m=e.offset(this.domNode),w={left:m.left,top:m.top,width:this.domNode[0].clientWidth,height:this.domNode[0].clientHeight};this.sizes={domWidth:this.domNode[0].clientWidth,domHeight:this.domNode[0].clientHeight,domOffset:w},t.extend(this.o,{pointers:{},labels:{0:{o:a},1:{o:d}},limits:{0:t.element(n[3]),1:t.element(n[4])},indicators:{0:u,1:g,2:f,3:v}}),t.extend(this.o.labels[0],{value:this.o.labels[0].o.find("span")}),t.extend(this.o.labels[1],{value:this.o.labels[1].o.find("span")}),o.settings.value.split(";")[1]||(this.settings.single=!0);var b=[h,l],y=o.settings.from<o.settings.to?!0:!1,_=o.settings.value.split(";");t.forEach(b,function(s,n){o.settings=t.copy(o.settings);var r=_[n];if(r){o.o.pointers[n]=new i(s,n,o.settings.vertical,o);var h=_[n-1],l=h?parseInt(h,10):void 0;r=o.settings.round?parseFloat(r):parseInt(r,10),(h&&y?l>r:r>l)&&(r=h);var a=y?r<o.settings.from:r>o.settings.from,d=a?o.settings.from:r;a=y?r>o.settings.to:r<o.settings.to,d=a?o.settings.to:r,o.o.pointers[n].set(d,!0);var p=e.offset(o.o.pointers[n].ptr);o.o.pointers[n].d={left:p.left,top:p.top}}}),o.domNode.bind("mousedown",o.clickHandler.apply(o)),this.o.value=t.element(this.domNode.find("i")[2]),this.is.init=!0,this.settings.css&&(p.css(this.settings.css.background?this.settings.css.background:{}),this.o.pointers[1]||(u.css(this.settings.css.before?this.settings.css.before:{}),v.css(this.settings.css.after?this.settings.css.after:{})),g.css(this.settings.css["default"]?this.settings.css["default"]:{}),f.css(this.settings.css["default"]?this.settings.css["default"]:{}),c.css(this.settings.css.range?this.settings.css.range:{}),h.css(this.settings.css.pointer?this.settings.css.pointer:{}),l.css(this.settings.css.pointer?this.settings.css.pointer:{})),t.forEach(this.o.pointers,function(t){o.redraw(t)})},o.prototype.clickHandler=function(){var i=this,s=this.settings.vertical,o=function(){var t=i.o.pointers[0].ptr,s=i.o.pointers[1].ptr,o=e.offset(t),n=e.offset(s);i.o.pointers[0].d={left:o.left,top:o.top,width:t[0].clientWidth,height:t[0].clientHeight},i.o.pointers[1].d={left:n.left,top:n.top,width:s[0].clientWidth,height:s[0].clientHeight}};return function(n){if(!i.disabled){var r=i.settings.from<i.settings.to,h=0,l=e.offset(i.domNode),a=i.o.pointers[0],d=i.o.pointers[1]?i.o.pointers[1]:null;if(!r&&d){var p=d;d=a,a=p}var c=n.originalEvent?n.originalEvent:n,u=s?c.pageY:c.pageX,g={left:l.left,top:l.top,width:i.domNode[0].clientWidth,height:i.domNode[0].clientHeight},f=i.o.pointers[h],v=s?"top":"left";if(d){d.d.width||o();var m=(d.d[v]-a.d[v])/2,w=a.d[v],b=u-w,y=b>m;y&&(f=r?d:a)}f._parent={offset:g,width:g.width,height:g.height};var _=a._getPageCoords(n);return f.cx=_.x-f.d.left,f.cy=_.y-f.d.top,f.onmousemove(n,_.x,_.y),f.onmouseup(),t.extend(f.d,{left:_.x,top:_.y}),i.redraw(f),!1}}},o.prototype.disable=function(t){this.disabled=t},o.prototype.nice=function(t){return t},o.prototype.onstatechange=function(){},o.prototype.limits=function(t,i){if(!this.settings.smooth){var s=100*this.settings.step/this.settings.interval;t=Math.round(t/s)*s}var e=this.o.pointers[1-i.uid];return e&&i.uid&&t<e.value.prc&&(t=e.value.prc),e&&!i.uid&&t>e.value.prc&&(t=e.value.prc),0>t&&(t=0),t>100&&(t=100),Math.round(10*t)/10},o.prototype.getPointers=function(){return this.o.pointers},o.prototype.generateScale=function(){if(this.settings.scale&&this.settings.scale.length>0){for(var t="",i=this.settings.scale,s=(100/(i.length-1)).toFixed(2),e=this.settings.vertical?"top":"left",o=0;o<i.length;o++)t+='<span style="'+e+": "+o*s+'%">'+("|"!=i[o]?"<ins>"+i[o]+"</ins>":"")+"</span>";return t}return""},o.prototype.onresize=function(){var i=this;this.sizes={domWidth:this.domNode[0].clientWidth,domHeight:this.domNode[0].clientHeight,domOffset:{left:this.domNode[0].offsetLeft,top:this.domNode[0].offsetTop,width:this.domNode[0].clientWidth,height:this.domNode[0].clientHeight}},t.forEach(this.o.pointers,function(t){i.redraw(t)})},o.prototype.update=function(){this.onresize(),this.drawScale()},o.prototype.drawScale=function(i){t.forEach(t.element(i).find("ins"),function(t){t.style.marginLeft=-t.clientWidth/2})},o.prototype.redraw=function(t){if(!this.is.init)return this.o.pointers[0]&&!this.o.pointers[1]?(this.originValue=this.o.pointers[0].value.prc,this.o.indicators[0].css(this.settings.vertical?{top:0,height:this.o.pointers[0].value.prc+"%"}:{left:0,width:this.o.pointers[0].value.prc+"%"}),this.o.indicators[1].css(this.settings.vertical?{top:this.o.pointers[0].value.prc+"%"}:{left:this.o.pointers[0].value.prc+"%"}),this.o.indicators[3].css(this.settings.vertical?{top:this.o.pointers[0].value.prc+"%"}:{left:this.o.pointers[0].value.prc+"%"})):this.o.indicators[2].css(this.settings.vertical?{top:this.o.pointers[1].value.prc+"%"}:{left:this.o.pointers[1].value.prc+"%"}),!1;if(this.setValue(),this.o.pointers[0]&&this.o.pointers[1]){var i=this.settings.vertical?{top:this.o.pointers[0].value.prc+"%",height:this.o.pointers[1].value.prc-this.o.pointers[0].value.prc+"%"}:{left:this.o.pointers[0].value.prc+"%",width:this.o.pointers[1].value.prc-this.o.pointers[0].value.prc+"%"};this.o.value.css(i)}if(this.o.pointers[0]&&!this.o.pointers[1]){var s=this.o.pointers[0].value.prc-this.originValue;this.o.indicators[3].css(s>=0?this.settings.vertical?{height:s+"%"}:{width:s+"%"}:this.settings.vertical?{height:0}:{width:0}),this.o.indicators[0].css(this.o.pointers[0].value.prc<this.originValue?this.settings.vertical?{height:this.o.pointers[0].value.prc+"%"}:{width:this.o.pointers[0].value.prc+"%"}:this.settings.vertical?{height:this.originValue+"%"}:{width:this.originValue+"%"})}this.o.labels[t.uid].value.html(this.nice(t.value.origin)),this.redrawLabels(t)},o.prototype.redrawLabels=function(t){function i(t,i,e){i.margin=-i.label/2;var o=s.settings.vertical?s.sizes.domHeight:s.sizes.domWidth;if(s.sizes.domWidth){var n=i.border+i.margin;0>n&&(i.margin-=n),s.sizes.domWidth>0&&i.border+i.label/2>o?(i.margin=0,i.right=!0):i.right=!1}return t.o.css(s.settings.vertical?{top:e+"%",marginLeft:"20px",marginTop:i.margin,bottom:"auto"}:{left:e+"%",marginLeft:i.margin+"px",right:"auto"}),i.right&&s.sizes.domWidth>0&&t.o.css(s.settings.vertical?{top:"auto",bottom:0}:{left:"auto",right:0}),i}var s=this,e=this.o.labels[t.uid],o=t.value.prc;this.sizes.domWidth=this.domNode[0].clientWidth,this.sizes.domHeight=this.domNode[0].clientHeight;var n,r,h=0===e.o[0].offsetWidth?7*e.o[0].textContent.length:e.o[0].offsetWidth,l={label:s.settings.vertical?e.o[0].offsetHeight:h,right:!1,border:o*(s.settings.vertical?this.sizes.domHeight:this.sizes.domWidth)/100},a=0===t.uid?1:0;if(!this.settings.single&&!this.settings.vertical){n=this.o.labels[a],r=this.o.pointers[a];var d=this.o.labels[0],p=this.o.labels[1],c=this.o.pointers[0],u=this.o.pointers[1];d.o.css(this.css.visible),p.o.css(this.css.visible);var g=u.ptr[0].offsetLeft-c.ptr[0].offsetLeft;g+10<d.o[0].offsetWidth+p.o[0].offsetWidth?(n.o.css(this.css.hidden),n.value.html(this.nice(r.value.origin)),o=(r.value.prc-o)/2+o,r.value.prc!=t.value.prc&&(e.value.html(this.nice(this.o.pointers[0].value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(this.o.pointers[1].value.origin)),l.label=e.o[0].offsetWidth,l.border=o*f/100)):(n.value.html(this.nice(r.value.origin)),n.o.css(this.css.visible))}l=i(e,l,o);var f=s.settings.vertical?s.sizes.domHeight:s.sizes.domWidth;if(n){var v=0===e.o[0].offsetWidth?e.o[0].textContent.length/2*7:e.o[0].offsetWidth,m={label:s.settings.vertical?n.o[0].offsetHeight:v,right:!1,border:r.value.prc*this.sizes.domWidth/100};l=i(n,m,r.value.prc)}this.redrawLimits()},o.prototype.redrawLimits=function(){if(this.settings.limits){var i=[!0,!0];for(var s in this.o.pointers)if(!this.settings.single||0===s){var e=this.o.pointers[s],o=this.o.labels[e.uid],n=o.o[0].offsetLeft-this.sizes.domOffset.left,r=this.o.limits[0];n<r[0].clientWidth&&(i[0]=!1),r=this.o.limits[1],n+o.o[0].clientWidth>this.sizes.domWidth-r[0].clientWidth&&(i[1]=!1)}for(var h=0;h<i.length;h++)t.element(this.o.limits[h]).addClass(i[h]?"animate-show":"animate-hidde")}},o.prototype.setValue=function(){var t=this.getValue();this.inputNode.attr("value",t),this.onstatechange.call(this,t,this.inputNode)},o.prototype.getValue=function(){if(!this.is.init)return!1;var i=this,s="";return t.forEach(this.o.pointers,function(t,e){void 0===t.value.prc||isNaN(t.value.prc)||(s+=(e>0?";":"")+i.prcToValue(t.value.prc))}),s},o.prototype.getPrcValue=function(){if(!this.is.init)return!1;var t="";return t},o.prototype.prcToValue=function(t){var i;if(this.settings.heterogeneity&&this.settings.heterogeneity.length>0)for(var s=this.settings.heterogeneity,e=0,o=this.settings.from,n=0;n<=s.length;n++){var r;r=s[n]?s[n].split("/"):[100,this.settings.to],t>=e&&t<=r[0]&&(i=o+(t-e)*(r[1]-o)/(r[0]-e)),e=r[0],o=r[1]}else i=this.settings.from+t*this.settings.interval/100;return this.round(i)},o.prototype.valueToPrc=function(t,i){var s;if(this.settings.heterogeneity&&this.settings.heterogeneity.length>0)for(var e=this.settings.heterogeneity,o=0,n=this.settings.from,r=0;r<=e.length;r++){var h;h=e[r]?e[r].split("/"):[100,this.settings.to],t>=n&&t<=h[1]&&(s=i.limits(o+(t-n)*(h[0]-o)/(h[1]-n))),o=h[0],n=h[1]}else s=i.limits(100*(t-this.settings.from)/this.settings.interval);return s},o.prototype.round=function(t){return t=Math.round(t/this.settings.step)*this.settings.step,t=this.settings.round?Math.round(t*Math.pow(10,this.settings.round))/Math.pow(10,this.settings.round):Math.round(t)},o}])}(angular),function(t){"use strict";t.module("ngSlider").run(["$templateCache",function(t){t.put("ng-slider/slider-bar.tmpl.html",'<span ng-class="mainSliderClass" id="{{sliderTmplId}}"><table><tr><td><div class="jslider-bg"><i class="l"></i><i class="r"></i><i class="v"></i><i class="p"></i><i class="s"></i><i class="s"></i><i class="f"></i></div><div class="jslider-pointer"></div><div class="jslider-pointer jslider-pointer-to"></div><div class="jslider-label"><span>{{from}}</span>{{options.dimension}}</div><div class="jslider-label jslider-label-to"><span>{{to}}</span>{{options.dimension}}</div><div class="jslider-value"><span></span>{{options.dimension}}</div><div class="jslider-value jslider-value-to"><span></span>{{options.dimension}}</div><div class="jslider-scale" id="{{sliderScaleDivTmplId}}"></div></td></tr></table></span>')}])}(window.angular),function(t){"use strict";t.module("ngSlider").factory("sliderUtils",["$window",function(t){return{offset:function(t){var i=t[0],s=0,e=0,o=document.documentElement||document.body,n=window.pageXOffset||o.scrollLeft,r=window.pageYOffset||o.scrollTop;return s=i.getBoundingClientRect().left+n,e=i.getBoundingClientRect().top+r,{left:s,top:e}},browser:function(){var i=t.navigator.userAgent,s={mozilla:/mozilla/i,chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer/i};for(var e in s)if(s[e].test(i))return e;return"unknown"}}}])}(angular);
